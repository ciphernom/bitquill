import Quill from"quill";const Delta=Quill.import("delta");export function composeDeltas(o){if(!Array.isArray(o))throw new Error("Expected array of deltas");let r=new Delta;for(const e of o)try{if(!e)continue;const o=e instanceof Delta?e:new Delta(e);if(!o.ops||0===o.ops.length)continue;if(r=r.compose(o),!r.ops||!Array.isArray(r.ops))throw new Error("Invalid composed delta structure");for(const o of r.ops){if("object"!=typeof o)throw new Error("Invalid operation in composed delta");if(!o.insert&&!o.delete&&!o.retain)throw new Error("Operation missing required properties")}}catch(o){throw console.error("Delta composition error:",{error:o,deltaObj:e,currentComposed:r}),o}try{new Delta(r)}catch(o){throw console.error("Final composition validation failed:",o),o}return r}